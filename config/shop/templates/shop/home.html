{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>                                                   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>{% block title %}CamX.lk{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'shop/css/home.css' %}">
    <link rel="stylesheet" href="{% static 'shop/css/auth.css' %}">
    <link rel="stylesheet" href="{% static 'shop/css/base.css' %}">
    <!-- BOOTSTRAP -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    {% block extra_head %}

<!-- THREE JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>

<!-- VANTA -->
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

<!-- PARTICLES -->
<script src="https://cdn.jsdelivr.net/npm/tsparticles@3/tsparticles.bundle.min.js"></script>

{% endblock %}
    <!-- THREE JS -->

</head>
<body>

<!-- ================= NAV BAR ================= -->
<nav class="main-nav">
    <div class="logo">
        <img src="{% static 'shop/images/lgo1.png' %}" alt="CamX.lk Logo">
    </div>
    <a href="{% url 'service_center' %}" class="service-btn">Service Center</a>
    <!-- ===== SEARCH BAR ===== -->
<div class="live-search-wrapper">
    <form id="search-form" action="{% url 'search_redirect' %}" method="GET">
        <input type="text"
            name="q"
            id="live-search-input"
            placeholder="Search cameras, lenses..."
            autocomplete="off">
    </form>

    <div id="live-search-results"></div>
</div>
        {% if user.is_authenticated %}
    <!-- Cart -->
    <div class="cart-wrapper">
        <a href="{% url 'view_cart' %}" class="cart-icon">
            <img src="{% static 'shop/images/cart.png' %}" alt="Cart" class="cart-image">
            <span class="cart-count">
                {{ product_cart_items|length|add:rent_cart_items|length }}
            </span>
        </a>

        <div class="cart-dropdown">
            <h4>Your Cart</h4>

            {% if product_cart_items %}
                <h5>Products</h5>
                {% for item in product_cart_items %}
                    <div class="cart-item">
                        {{ item.product.name }} x{{ item.quantity }}
                    </div>
                {% endfor %}
            {% else %}
                <p>No product items</p>
            {% endif %}

            {% if rent_cart_items %}
                <h5>Rent Items</h5>
                {% for item in rent_cart_items %}
                    <div class="cart-item">
                        {{ item.rent_item.name }} x{{ item.quantity }}
                    </div>
                {% endfor %}
            {% else %}
                <p>No rent items</p>
            {% endif %}
        </div>
    </div>


    <div class="auth-buttons">



<a href="{% url 'profile' %}">
    <img src="{{ user.profile.profile_image.url }}"
            onerror="this.src='{% static 'shop/images/default.png' %}'"
            class="nav-avatar">
</a>

{% else %}

<a href="{% url 'login' %}">Login</a>

{% endif %}
</nav>
<nav class="sub-nav">
    <ul class="sub-nav-links">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li class="dropdown">
            <a href="#">Cameras </a>
            <div class="dropdown-content">
                <a href="#">DSLR Cameras</a>
                <a href="#">Mirrorless Cameras</a>
                <a href="#">Canon/Nikon</a>
                <a href="#">Sony/Fujifilm/Panasonic</a>
                <a href="#">Action Cameras</a>
                <a href="#">GoPro/DJ Action</a>
            </div>
        </li>
        <li class="dropdown">
            <a href="#">Lenses </a>
            <div class="dropdown-content">
                <a href="#">Canon EF/EF-S</a>
                <a href="#">Canon RF</a>
                <a href="#">Nikon F Mount</a>
                <a href="#">Sony E Mount</a>
                <a href="#">Fujifilm XF/XC</a>
                <a href="#">Sigma/Tamron/Tokina Third Party Lenses</a>
                <a href="#">Cine Lenses</a>
            </div>
        </li>
        <li class="dropdown">
            <a href="#">Accessories</a>
            <div class="dropdown-content">
                <a href="#">Memory Cards (SD/CF express)</a>
                <a href="#">Camera Batteries & Chargers</a>
                <a href="#">Lens Filters(UV/ND/CPL)</a>
                <a href="#">Tripods/Monopods/Gimbals</a>
                <a href="#">External Flash/Speedlights</a>
                <a href="#">Microphones(Rode/Boya etc)</a>
                <a href="#">Camera Bags/& Straps</a>
            </div>
        </li>
        <li class="dropdown">
            <a href="#">Studio Items</a>
            <div class="dropdown-content">
                <a href="#">Studio Lights</a>
                <a href="#">Backdrops</a>
                <a href="#">Softboxes/Light Stands</a>
                <a href="#">Audio Interfaces</a>
                <a href="#">Capture Cards(Elgato etc.)</a>
            </div>
        </li>
        <li class="dropdown">
            <a href="#">Extra Services</a>
            <div class="dropdown-content">
                <a href="#">Camera Service & Cleaning</a>
                <a href="#">Buy Back/Trade-In</a>
            </div>
        </li>

        <!-- ===== RENT BUTTON ===== -->
        <li><a href="{% url 'rent' %}" class="rent-btn">Rental</a></li>
    </ul>
    
</nav>

<!-- ================= HERO SECTION ================= -->
<section class="hero-section" id="hero-bg">
    <div class="hero-slide active"><img src="{% static 'shop/images/i.jpg' %}" alt="Hero Image 01"></div>
    <div class="hero-slide"><img src="{% static 'shop/images/me.jpg' %}" alt="Hero Image 02"></div>
    <div class="hero-slide"><img src="{% static 'shop/images/c.jpg' %}" alt="Hero Image 03"></div>
    <div class="hero-slide"><img src="{% static 'shop/images/b.jpg' %}" alt="Hero Image 04"></div>
    <div class="hero-slide"><img src="{% static 'shop/images/a.jpg' %}" alt="Hero Image 05"></div>
    <div class="hero-slide"><img src="{% static 'shop/images/am.png' %}" alt="Hero Image 06"></div>

    <div class="hero-content">
        <h1>Professional Cameras & Lenses</h1>
        <p>Your one-stop shop for photography gear in Sri Lanka</p>
        <a href="#products" class="cta-btn">Explore Products</a>
    </div>
</section>



<!-- ================= CONTACT ================= -->
<a href="tel:0719421978" class="contact-number">üìû Call Now</a>

<!-- ================= CONTENT BLOCK ================= -->
{% block content %}{% endblock %}

<!-- ================= PRODUCTS SECTION ================= -->
<section class="products" id="products">
    <h2>Popular Products</h2>

    <div class="row g-4">

    {% for product in products %}

    <div class="col-lg-3 col-md-4 col-sm-6">

        <div class="product-card" data-url="{% url 'product_detail' product.id %}">

            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% else %}
                <img src="{% static 'shop/images/default-product.png' %}" alt="No Image">
            {% endif %}

            <h3 class="product-title">
                <a href="{% url 'product_detail' product.id %}">
                    {{ product.name }}
                </a>
            </h3>

            <p>Rs. {{ product.price }}</p>

            {% if user.is_authenticated %}
                <a href="{% url 'add_to_cart' product.id %}" class="add-to-cart-btn">
                    Add to Cart üõí
                </a>
            {% else %}
                <a href="{% url 'login' %}?next={% url 'home' %}" class="add-to-cart-btn">
                    Login to Add
                </a>
            {% endif %}

        </div>

    </div>

    {% empty %}
    <p>No products available</p>

    {% endfor %}

    </div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="footer">

<div class="footer-container">

    <div class="footer-section about">
        <img src="{% static 'shop/images/lgo1.png' %}" alt="CamX.lk Logo" class="footer-logo">
        <p>Your one-stop shop for cameras & accessories in Sri Lanka.</p>
    </div>

    <div class="footer-section links">
        <h4>Quick Links</h4>
        <ul>
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'service_center' %}">Service Center</a></li>
            <li><a href="#">Cameras</a></li>
            <li><a href="#">Lenses</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </div>

    <div class="footer-section contact">
        <h4>Contact Us</h4>
        <p>üìû 0719421978</p>
        <p>üìß info@camx.lk</p>
        <p>üìç Colombo, Sri Lanka</p>

        <div class="map">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3960.2938978702905!2d79.9199630748101!3d6.974610393026125!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zNsKwNTgnMjguNiJOIDc5wrA1NScyMS4xIkU!5e0!3m2!1sen!2sus!4v1768542470287!5m2!1sen!2sus"
                width="250"
                height="150"
                style="border:0;"
                allowfullscreen=""
                loading="lazy">
            </iframe>
        </div>
    </div>

</div>

<div class="footer-bottom">
    <p>&copy; 2025 CamX.lk | All Rights Reserved</p>
</div>

</footer>

<script src="{% static 'shop/js/home.js' %}"></script>
{% block extra_js %}{% endblock %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.querySelectorAll('.dropdown > a').forEach(link=>{
    link.addEventListener('click',function(e){
        if(window.innerWidth <= 768){
            e.preventDefault();
            this.parentElement.classList.toggle('active');
        }
    });
});
</script>
<script>
VANTA.NET({
    el: "#hero-bg",
    mouseControls: true,
    touchControls: true,
    gyroControls: false,
    minHeight: 200.00,
    minWidth: 200.00,
    scale: 1.00,
    scaleMobile: 1.00,
    color: 0x1b98e0,
    backgroundColor: 0x020b1a,
    points: 10.0,
    spacing: 15.0
})
</script>

</body>
</html>